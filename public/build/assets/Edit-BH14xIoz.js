import{r as f,p as w,c as r,o as u,a as t,k as B,t as b,j as c,y as R,C as g,w as d,B as n,u as i,D as y,F as x,E as C}from"./app-BH_YfDU3.js";import{d as k}from"./index-Ds4mjRDd.js";const P={class:"min-vh-100 bg-light"},q={class:"navbar navbar-dark",style:{"background-color":"#3d85c6"}},S={class:"container-fluid d-flex align-items-center"},U={class:"dropdown ml-auto"},_={class:"navbar-text text-white dropdown-toggle d-flex align-items-center",id:"userDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},I={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"userDropdown"},V={class:"d-flex"},N={class:"flex-grow-1 p-4"},D={class:"container-fluid bg-white rounded-lg shadow p-4",style:{"max-width":"1400px"}},O={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},M={class:"form-group mb-3"},h={class:"form-group mb-3"},L={class:"form-group mb-3"},j={class:"form-group mb-3"},T={class:"form-group mb-3"},z=["value"],F={class:"form-group mb-3"},$={class:"form-group mb-3"},G={class:"form-group mb-3"},Q={class:"form-group mb-3"},J={class:"form-group mb-3"},H={class:"d-flex justify-content-end"},K=["disabled"],Y={__name:"Edit",props:{subproduto:Object,subprodutoOptions:Array,user:Object},setup(p){const l=p,e=k.useForm({rodovia:l.subproduto?.rodovia||"",data_aprovacao:l.subproduto?.data_aprovacao||"",sei:l.subproduto?.sei||"",oficio_numero:l.subproduto?.oficio_numero||"",sei_versao_aprovada:l.subproduto?.sei_versao_aprovada||"",subproduto:l.subproduto?.id_subproduto||"",cod_siac:l.subproduto?.cod_siac||"",quantidade:l.subproduto?.quantidade||"",unidade:l.subproduto?.unidade||"",quantidade_medida:l.subproduto?.quantidade_medida||""}),m=f(null),v=f(l.subproduto?.id_subproduto||"");w(()=>l.subproduto,a=>{a&&Object.keys(a).length>0&&(e.rodovia=a.rodovia||"",e.data_aprovacao=a.data_aprovacao||"",e.sei=a.sei||"",e.oficio_numero=a.oficio_numero||"",e.sei_versao_aprovada=a.sei_versao_aprovada||"",e.subproduto=a.id_subproduto||"",e.cod_siac=a.cod_siac||"",e.quantidade=a.quantidade||"",e.unidade=a.unidade||"",e.quantidade_medida=a.quantidade_medida||"",v.value=a.id_subproduto||"")},{immediate:!0});const A=async a=>{if(a)try{const s=await(await fetch("/subprodutos/fetch/"+encodeURIComponent(a))).json();e.subproduto=a,e.cod_siac=s.cod_siac||"",e.unidade=s.unidade_de_medida||""}catch(o){console.log("Erro na requisição:",o)}},E=()=>{l.subproduto&&l.subproduto.id&&e.put(`/subprodutos/${l.subproduto.id}`,{onSuccess:a=>{m.value=a.props.flash?.success||"Subproduto atualizado!"},onError:a=>{console.log("Erros de validação:",a)}})};return(a,o)=>(u(),r("div",P,[t("nav",q,[t("div",S,[o[14]||(o[14]=t("img",{src:"/images/logo.jpg",alt:"Logo",style:{height:"40px","margin-right":"10px"}},null,-1)),o[15]||(o[15]=t("span",{class:"navbar-brand mb-0 h1"},"Sistema de Controle JGP - DNIT",-1)),t("div",U,[t("span",_,[o[13]||(o[13]=t("i",{class:"fas fa-user-circle mr-2",style:{"font-size":"1.5rem"}},null,-1)),B(" "+b(p.user?.name||"N/A"),1)]),t("div",I,[p.user?(u(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:o[0]||(o[0]=R(s=>a.$inertia.post("/logout",{},{onSuccess:()=>a.window.location.href="/subprodutos"}),["prevent"]))},"Sair")):c("",!0)])])])]),t("div",V,[o[35]||(o[35]=g('<div class="bg-white border-right shadow-sm" style="width:250px;min-height:calc(100vh - 56px);"><ul class="nav flex-column p-3"><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos"><i class="fas fa-search mr-2" style="color:#007BFF;"></i> CONSULTAR SUBPRODUTOS </a></li><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos/create"><i class="fas fa-plus-circle mr-2" style="color:#28A745;"></i> CADASTRAR SUBPRODUTOS </a></li></ul></div>',1)),t("div",N,[t("div",D,[o[34]||(o[34]=t("h3",{class:"text-center mb-4 font-weight-bold",style:{color:"#4B5563","font-size":"1.3rem"}},"Editar Subproduto",-1)),m.value?(u(),r("div",O,[B(b(m.value)+" ",1),t("button",{type:"button",class:"close",onClick:o[1]||(o[1]=s=>m.value=null),"aria-label":"Close"},[...o[16]||(o[16]=[t("span",{"aria-hidden":"true"},"×",-1)])])])):c("",!0),t("form",{onSubmit:R(E,["prevent"]),class:"needs-validation",novalidate:""},[t("div",M,[o[17]||(o[17]=t("label",{class:"form-label font-weight-semibold"},"Ofício Nº",-1)),d(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>i(e).oficio_numero=s),class:"form-control",placeholder:"Digite o número do ofício"},null,512),[[n,i(e).oficio_numero]])]),t("div",h,[o[18]||(o[18]=t("label",{class:"form-label font-weight-semibold"},"SEI",-1)),d(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>i(e).sei=s),class:"form-control",placeholder:"Digite o SEI"},null,512),[[n,i(e).sei]])]),t("div",L,[o[19]||(o[19]=t("label",{class:"form-label font-weight-semibold"},"Data",-1)),d(t("input",{type:"date","onUpdate:modelValue":o[4]||(o[4]=s=>i(e).data_aprovacao=s),class:"form-control",required:""},null,512),[[n,i(e).data_aprovacao]]),o[20]||(o[20]=t("div",{class:"invalid-feedback"},"Por favor, selecione uma data.",-1))]),t("div",j,[o[22]||(o[22]=t("label",{class:"form-label font-weight-semibold"},"Rodovia",-1)),d(t("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>i(e).rodovia=s),class:"form-control",required:""},[...o[21]||(o[21]=[g('<option value="">Selecione</option><option value="BR-230/MA">01 - BR-230/MA</option><option value="BR-437 CE/RN">02 - BR-437 CE/RN</option><option value="BR-402 MA/PI">03 - BR-402 MA/PI</option><option value="BR-116 CE">04 - BR-116 CE</option><option value="BR-020 GO/BA">05 - BR-020 GO/BA</option><option value="BR-304 RN">06 - BR-304 RN</option><option value="BR-316 PI">07 - BR-316 PI</option><option value="BR-104 RN">08 - BR-104 RN</option><option value="BR-030 BA">09 - BR-030 BA</option><option value="BR-122 BA">10 - BR-122 BA</option><option value="BR-316 PI (km 33,54 ao km 55,60)">11 - BR-316 PI (km 33,54 ao km 55,60)</option><option value="BR-110/316/PE">12 - BR-110/316/PE</option><option value="BR-349/SE/AL">13 - BR-349/SE/AL</option><option value="BR-135/BA">14 - BR-135/BA</option><option value="BR-324/BA">15 - BR-324/BA</option><option value="BR-316/MA">16 - BR-316/MA</option><option value="BR-226/CE">17 - BR-226/CE</option><option value="BR-010/MA">18 - BR-010/MA</option><option value="BR-104/AL">19 - BR-104/AL</option><option value="BR-222/CE">20 - BR-222/CE</option><option value="BR-423, BR-424, BR-316 PE/AL">21 - BR-423, BR-424, BR-316 PE/AL</option><option value="BR-232 PE">22 - BR-232 PE</option><option value="BR-407, BR-324 BA">23 - BR-407, BR-324 BA</option><option value="BR-230 PI/CE">24 - BR-230 PI/CE</option>',25)])],512),[[y,i(e).rodovia]]),o[23]||(o[23]=t("div",{class:"invalid-feedback"},"Por favor, selecione uma rodovia.",-1))]),t("div",T,[o[25]||(o[25]=t("label",{class:"form-label font-weight-semibold"},"Subproduto",-1)),d(t("select",{"onUpdate:modelValue":o[6]||(o[6]=s=>v.value=s),onChange:o[7]||(o[7]=s=>A(v.value)),class:"form-control",required:""},[o[24]||(o[24]=t("option",{value:""},"Selecione",-1)),(u(!0),r(x,null,C(p.subprodutoOptions,s=>(u(),r("option",{key:s.id,value:s.subproduto},b(s.subproduto+" - "+s.descricao_revisada),9,z))),128))],544),[[y,v.value]]),o[26]||(o[26]=t("div",{class:"invalid-feedback"},"Por favor, selecione um subproduto.",-1))]),t("div",F,[o[27]||(o[27]=t("label",{class:"form-label font-weight-semibold"},"Código SIAC",-1)),d(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>i(e).cod_siac=s),class:"form-control bg-light",readonly:""},null,512),[[n,i(e).cod_siac]])]),t("div",$,[o[28]||(o[28]=t("label",{class:"form-label font-weight-semibold"},"Unidade",-1)),d(t("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=s=>i(e).unidade=s),class:"form-control bg-light",readonly:""},null,512),[[n,i(e).unidade]])]),t("div",G,[o[29]||(o[29]=t("label",{class:"form-label font-weight-semibold"},"Quantidade",-1)),d(t("input",{type:"number","onUpdate:modelValue":o[10]||(o[10]=s=>i(e).quantidade=s),class:"form-control",required:""},null,512),[[n,i(e).quantidade,void 0,{number:!0}]]),o[30]||(o[30]=t("div",{class:"invalid-feedback"},"Por favor, insira uma quantidade válida.",-1))]),t("div",Q,[o[31]||(o[31]=t("label",{class:"form-label font-weight-semibold"},"Quantidade Medida",-1)),d(t("input",{type:"number",step:"0.01","onUpdate:modelValue":o[11]||(o[11]=s=>i(e).quantidade_medida=s),class:"form-control"},null,512),[[n,i(e).quantidade_medida,void 0,{number:!0}]])]),t("div",J,[o[32]||(o[32]=t("label",{class:"form-label font-weight-semibold"},"SEI - Versão Aprovada",-1)),d(t("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=s=>i(e).sei_versao_aprovada=s),class:"form-control",placeholder:"Digite o SEI da versão aprovada"},null,512),[[n,i(e).sei_versao_aprovada]])]),t("div",H,[t("button",{type:"submit",class:"btn btn-primary mr-2",disabled:i(e).processing},"Salvar",8,K),o[33]||(o[33]=t("a",{href:"/subprodutos",class:"btn btn-outline-secondary"},"Cancelar",-1))])],32)])])])]))}};export{Y as default};
