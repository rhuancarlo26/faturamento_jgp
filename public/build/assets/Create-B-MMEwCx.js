import{r as c,c as n,o as r,a as s,k as b,t as m,j as f,y as B,C as R,w as i,B as d,u as l,D as g,F as y,E}from"./app-BSpHz-Ss.js";import{d as x}from"./index-C9HHl74C.js";const C={class:"min-vh-100 bg-light"},P={class:"navbar navbar-dark",style:{"background-color":"#3d85c6"}},k={class:"container-fluid d-flex align-items-center"},D={class:"dropdown ml-auto"},h={class:"navbar-text text-white dropdown-toggle d-flex align-items-center",id:"userDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},I={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"userDropdown"},N={class:"d-flex"},O={class:"flex-grow-1 p-4"},U={class:"container-fluid bg-white rounded-lg shadow p-4",style:{"max-width":"1400px"}},V={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},M={class:"form-group mb-3"},L={class:"form-group mb-3"},T={class:"form-group mb-3"},_={class:"form-group mb-3"},j={class:"form-group mb-3"},F=["value"],q={class:"form-group mb-3"},z={class:"form-group mb-3"},G={class:"d-flex justify-content-end"},$=["disabled"],K={__name:"Create",props:{subprodutoOptions:Array,user:Object},setup(v){const e=x.useForm({rodovia:"",data_aprovacao:"",sei:"",oficio_numero:"",sei_versao_aprovada:"",subproduto:"",cod_siac:""}),u=c(null),p=c(""),A=async a=>{if(a)try{const t=await(await fetch("/subprodutos/fetch/"+encodeURIComponent(a))).json();console.log("Dados recebidos:",t),e.subproduto=t.subproduto||a,e.cod_siac=t.cod_siac||"",console.log("Atribuído cod_siac:",e.cod_siac)}catch(o){console.log("Erro na requisição:",o)}},w=()=>{e.post("/subprodutos",{onSuccess:a=>{e.reset(),p.value="",u.value=a.props.flash?.success||"Subproduto cadastrado!",console.log("Sucesso: dados cadastrados")},onError:a=>{console.log("Erros de validação:",a)}})},S=()=>{e.post("/logout",{onSuccess:()=>{window.location.href="/subprodutos"}})};return(a,o)=>(r(),n("div",C,[s("nav",P,[s("div",k,[o[10]||(o[10]=s("img",{src:"/images/logo.jpg",alt:"Logo",style:{height:"40px","margin-right":"10px"}},null,-1)),o[11]||(o[11]=s("span",{class:"navbar-brand mb-0 h1"},"Sistema de Controle JGP - DNIT",-1)),s("div",D,[s("span",h,[o[9]||(o[9]=s("i",{class:"fas fa-user-circle mr-2",style:{"font-size":"1.5rem"}},null,-1)),b(" "+m(v.user?.name||"N/A"),1)]),s("div",I,[v.user?(r(),n("a",{key:0,class:"dropdown-item",href:"#",onClick:B(S,["prevent"])},"Sair")):f("",!0)])])])]),s("div",N,[o[27]||(o[27]=R('<div class="bg-white border-right shadow-sm" style="width:250px;min-height:calc(100vh - 56px);"><ul class="nav flex-column p-3"><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos"><i class="fas fa-search mr-2" style="color:#007BFF;"></i> CONSULTAR SUBPRODUTOS </a></li><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos/create"><i class="fas fa-plus-circle mr-2" style="color:#28A745;"></i> CADASTRAR SUBPRODUTOS </a></li></ul></div>',1)),s("div",O,[s("div",U,[o[26]||(o[26]=s("h3",{class:"text-center mb-4 font-weight-bold",style:{color:"#4B5563","font-size":"1.3rem"}},"CADASTRAR SUBPRODUTOS APROVADOS",-1)),u.value?(r(),n("div",V,[b(m(u.value)+" ",1),s("button",{type:"button",class:"close",onClick:o[0]||(o[0]=t=>u.value=null),"aria-label":"Close"},[...o[12]||(o[12]=[s("span",{"aria-hidden":"true"},"×",-1)])])])):f("",!0),s("form",{onSubmit:B(w,["prevent"]),class:"needs-validation",novalidate:""},[s("div",M,[o[13]||(o[13]=s("label",{class:"form-label font-weight-semibold"},"Ofício Nº",-1)),i(s("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>l(e).oficio_numero=t),class:"form-control",placeholder:"Digite o número do ofício"},null,512),[[d,l(e).oficio_numero]])]),s("div",L,[o[14]||(o[14]=s("label",{class:"form-label font-weight-semibold"},"SEI",-1)),i(s("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>l(e).sei=t),class:"form-control",placeholder:"Digite o SEI"},null,512),[[d,l(e).sei]])]),s("div",T,[o[15]||(o[15]=s("label",{class:"form-label font-weight-semibold"},"Data",-1)),i(s("input",{type:"date","onUpdate:modelValue":o[3]||(o[3]=t=>l(e).data_aprovacao=t),class:"form-control",required:""},null,512),[[d,l(e).data_aprovacao]]),o[16]||(o[16]=s("div",{class:"invalid-feedback"},"Por favor, selecione uma data.",-1))]),s("div",_,[o[18]||(o[18]=s("label",{class:"form-label font-weight-semibold"},"Rodovia",-1)),i(s("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>l(e).rodovia=t),class:"form-control",required:""},[...o[17]||(o[17]=[R('<option value="">Selecione</option><option value="BR-230/MA">01 - BR-230/MA</option><option value="BR-437 CE/RN">02 - BR-437 CE/RN</option><option value="BR-402 MA/PI">03 - BR-402 MA/PI</option><option value="BR-116 CE">04 - BR-116 CE</option><option value="BR-020 GO/BA">05 - BR-020 GO/BA</option><option value="BR-304 RN">06 - BR-304 RN</option><option value="BR-316 PI">07 - BR-316 PI</option><option value="BR-104 RN">08 - BR-104 RN</option><option value="BR-030 BA">09 - BR-030 BA</option><option value="BR-122 BA">10 - BR-122 BA</option><option value="BR-316 PI (km 33,54 ao km 55,60)">11 - BR-316 PI (km 33,54 ao km 55,60)</option><option value="BR-110/316/PE">12 - BR-110/316/PE</option><option value="BR-349/SE/AL">13 - BR-349/SE/AL</option><option value="BR-135/BA">14 - BR-135/BA</option><option value="BR-324/BA">15 - BR-324/BA</option><option value="BR-316/MA">16 - BR-316/MA</option><option value="BR-226/CE">17 - BR-226/CE</option><option value="BR-010/MA">18 - BR-010/MA</option><option value="BR-104/AL">19 - BR-104/AL</option><option value="BR-222/CE">20 - BR-222/CE</option><option value="BR-423, BR-424, BR-316 PE/AL">21 - BR-423, BR-424, BR-316 PE/AL</option><option value="BR-232 PE">22 - BR-232 PE</option><option value="BR-407, BR-324 BA">23 - BR-407, BR-324 BA</option><option value="BR-230 PI/CE">24 - BR-230 PI/CE</option>',25)])],512),[[g,l(e).rodovia]]),o[19]||(o[19]=s("div",{class:"invalid-feedback"},"Por favor, selecione uma rodovia.",-1))]),s("div",j,[o[21]||(o[21]=s("label",{class:"form-label font-weight-semibold"},"Subproduto",-1)),i(s("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>p.value=t),onChange:o[6]||(o[6]=t=>A(p.value)),class:"form-control",required:""},[o[20]||(o[20]=s("option",{value:""},"Selecione",-1)),(r(!0),n(y,null,E(v.subprodutoOptions,t=>(r(),n("option",{key:t.subproduto,value:t.subproduto},m(t.subproduto+" - "+t.descricao_revisada),9,F))),128))],544),[[g,p.value]]),o[22]||(o[22]=s("div",{class:"invalid-feedback"},"Por favor, selecione um subproduto.",-1))]),s("div",q,[o[23]||(o[23]=s("label",{class:"form-label font-weight-semibold"},"Código SIAC",-1)),i(s("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=t=>l(e).cod_siac=t),class:"form-control bg-light",readonly:""},null,512),[[d,l(e).cod_siac]])]),s("div",z,[o[24]||(o[24]=s("label",{class:"form-label font-weight-semibold"},"SEI - Versão Aprovada",-1)),i(s("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=t=>l(e).sei_versao_aprovada=t),class:"form-control",placeholder:"Digite o SEI da versão aprovada"},null,512),[[d,l(e).sei_versao_aprovada]])]),s("div",G,[s("button",{type:"submit",class:"btn btn-primary mr-2",disabled:l(e).processing},"CADASTRAR",8,$),o[25]||(o[25]=s("a",{href:"/subprodutos",class:"btn btn-outline-secondary"},"CANCELAR",-1))])],32)])])])]))}};export{K as default};
