import{r as b,c as r,o as i,a as e,k as f,t as l,j as d,y as B,C as R,w as n,B as p,u as s,D as g,F as x,E as w}from"./app-BH_YfDU3.js";import{d as S}from"./index-Ds4mjRDd.js";const E={class:"min-vh-100 bg-light"},h={class:"navbar navbar-dark",style:{"background-color":"#3d85c6"}},C={class:"container-fluid d-flex align-items-center"},k={class:"dropdown ml-auto"},P={class:"navbar-text text-white dropdown-toggle d-flex align-items-center",id:"userDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},U={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"userDropdown"},q={class:"d-flex"},D={class:"flex-grow-1 p-4"},V={class:"container-fluid bg-white rounded-lg shadow p-4",style:{"max-width":"1400px"}},I={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},N={class:"form-group mb-3"},O={key:0,class:"text-danger"},M={class:"form-group mb-3"},L={key:0,class:"text-danger"},T={class:"form-group mb-3"},j={key:0,class:"text-danger"},F={class:"form-group mb-3"},z={key:0,class:"text-danger"},G={class:"form-group mb-3"},Q=["value"],$={key:0,class:"text-danger"},J={class:"form-group mb-3"},H={key:0,class:"text-danger"},K={class:"form-group mb-3"},W={key:0,class:"text-danger"},X={class:"form-group mb-3"},Y={key:0,class:"text-danger"},Z={class:"form-group mb-3"},oo={key:0,class:"text-danger"},eo={class:"form-group mb-3"},to={key:0,class:"text-danger"},so={class:"d-flex justify-content-end"},ao=["disabled"],lo={__name:"Create",props:{subprodutoOptions:Array,user:Object},setup(c){const t=S.useForm({rodovia:"",data_aprovacao:"",sei:"",oficio_numero:"",sei_versao_aprovada:"",subproduto:"",cod_siac:"",quantidade:"",unidade:"",quantidade_medida:""}),m=b(null),v=b(""),A=async u=>{if(u)try{const a=await(await fetch("/subprodutos/fetch/"+encodeURIComponent(u))).json();t.subproduto=u,t.cod_siac=a.cod_siac||"",t.unidade=a.unidade_de_medida||""}catch(o){console.log("Erro na requisição:",o)}},y=()=>{t.post("/subprodutos",{onSuccess:u=>{t.reset(),v.value="",m.value=u.props.flash?.success||"Subproduto cadastrado!"},onError:u=>{console.log("Erros de validação:",u)}})},_=()=>{t.post("/logout",{onSuccess:()=>{window.location.href="/subprodutos"}})};return(u,o)=>(i(),r("div",E,[e("nav",h,[e("div",C,[o[13]||(o[13]=e("img",{src:"/images/logo.jpg",alt:"Logo",style:{height:"40px","margin-right":"10px"}},null,-1)),o[14]||(o[14]=e("span",{class:"navbar-brand mb-0 h1"},"Sistema de Controle JGP - DNIT",-1)),e("div",k,[e("span",P,[o[12]||(o[12]=e("i",{class:"fas fa-user-circle mr-2",style:{"font-size":"1.5rem"}},null,-1)),f(" "+l(c.user?.name||"N/A"),1)]),e("div",U,[c.user?(i(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:B(_,["prevent"])},"Sair")):d("",!0)])])])]),e("div",q,[o[30]||(o[30]=R('<div class="bg-white border-right shadow-sm" style="width:250px;min-height:calc(100vh - 56px);"><ul class="nav flex-column p-3"><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos"><i class="fas fa-search mr-2" style="color:#007BFF;"></i> CONSULTAR SUBPRODUTOS </a></li><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos/create"><i class="fas fa-plus-circle mr-2" style="color:#28A745;"></i> CADASTRAR SUBPRODUTOS </a></li></ul></div>',1)),e("div",D,[e("div",V,[o[29]||(o[29]=e("h3",{class:"text-center mb-4 font-weight-bold",style:{color:"#4B5563","font-size":"1.3rem"}},"CADASTRAR SUBPRODUTOS APROVADOS",-1)),m.value?(i(),r("div",I,[f(l(m.value)+" ",1),e("button",{type:"button",class:"close",onClick:o[0]||(o[0]=a=>m.value=null),"aria-label":"Close"},[...o[15]||(o[15]=[e("span",{"aria-hidden":"true"},"×",-1)])])])):d("",!0),e("form",{onSubmit:B(y,["prevent"]),class:"needs-validation",novalidate:""},[e("div",N,[o[16]||(o[16]=e("label",{class:"form-label font-weight-semibold"},"Ofício Nº",-1)),n(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>s(t).oficio_numero=a),class:"form-control",placeholder:"Digite o número do ofício",required:""},null,512),[[p,s(t).oficio_numero]]),s(t).errors.oficio_numero?(i(),r("div",O,l(s(t).errors.oficio_numero),1)):d("",!0)]),e("div",M,[o[17]||(o[17]=e("label",{class:"form-label font-weight-semibold"},"SEI",-1)),n(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=a=>s(t).sei=a),class:"form-control",placeholder:"Digite o SEI",required:""},null,512),[[p,s(t).sei]]),s(t).errors.sei?(i(),r("div",L,l(s(t).errors.sei),1)):d("",!0)]),e("div",T,[o[18]||(o[18]=e("label",{class:"form-label font-weight-semibold"},"Data",-1)),n(e("input",{type:"date","onUpdate:modelValue":o[3]||(o[3]=a=>s(t).data_aprovacao=a),class:"form-control",required:""},null,512),[[p,s(t).data_aprovacao]]),s(t).errors.data_aprovacao?(i(),r("div",j,l(s(t).errors.data_aprovacao),1)):d("",!0)]),e("div",F,[o[20]||(o[20]=e("label",{class:"form-label font-weight-semibold"},"Rodovia",-1)),n(e("select",{"onUpdate:modelValue":o[4]||(o[4]=a=>s(t).rodovia=a),class:"form-control",required:""},[...o[19]||(o[19]=[R('<option value="">Selecione</option><option value="BR-230/MA">01 - BR-230/MA</option><option value="BR-437 CE/RN">02 - BR-437 CE/RN</option><option value="BR-402 MA/PI">03 - BR-402 MA/PI</option><option value="BR-116 CE">04 - BR-116 CE</option><option value="BR-020 GO/BA">05 - BR-020 GO/BA</option><option value="BR-304 RN">06 - BR-304 RN</option><option value="BR-316 PI">07 - BR-316 PI</option><option value="BR-104 RN">08 - BR-104 RN</option><option value="BR-030 BA">09 - BR-030 BA</option><option value="BR-122 BA">10 - BR-122 BA</option><option value="BR-316 PI (km 33,54 ao km 55,60)">11 - BR-316 PI (km 33,54 ao km 55,60)</option><option value="BR-110/316/PE">12 - BR-110/316/PE</option><option value="BR-349/SE/AL">13 - BR-349/SE/AL</option><option value="BR-135/BA">14 - BR-135/BA</option><option value="BR-324/BA">15 - BR-324/BA</option><option value="BR-316/MA">16 - BR-316/MA</option><option value="BR-226/CE">17 - BR-226/CE</option><option value="BR-010/MA">18 - BR-010/MA</option><option value="BR-104/AL">19 - BR-104/AL</option><option value="BR-222/CE">20 - BR-222/CE</option><option value="BR-423, BR-424, BR-316 PE/AL">21 - BR-423, BR-424, BR-316 PE/AL</option><option value="BR-232 PE">22 - BR-232 PE</option><option value="BR-407, BR-324 BA">23 - BR-407, BR-324 BA</option><option value="BR-230 PI/CE">24 - BR-230 PI/CE</option>',25)])],512),[[g,s(t).rodovia]]),s(t).errors.rodovia?(i(),r("div",z,l(s(t).errors.rodovia),1)):d("",!0)]),e("div",G,[o[22]||(o[22]=e("label",{class:"form-label font-weight-semibold"},"Subproduto",-1)),n(e("select",{"onUpdate:modelValue":o[5]||(o[5]=a=>v.value=a),onChange:o[6]||(o[6]=a=>A(v.value)),class:"form-control",required:""},[o[21]||(o[21]=e("option",{value:""},"Selecione",-1)),(i(!0),r(x,null,w(c.subprodutoOptions,a=>(i(),r("option",{key:a.id,value:a.subproduto},l(a.subproduto+" - "+a.descricao_revisada),9,Q))),128))],544),[[g,v.value]]),s(t).errors.subproduto?(i(),r("div",$,l(s(t).errors.subproduto),1)):d("",!0)]),e("div",J,[o[23]||(o[23]=e("label",{class:"form-label font-weight-semibold"},"Código SIAC",-1)),n(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=a=>s(t).cod_siac=a),class:"form-control bg-light",readonly:""},null,512),[[p,s(t).cod_siac]]),s(t).errors.cod_siac?(i(),r("div",H,l(s(t).errors.cod_siac),1)):d("",!0)]),e("div",K,[o[24]||(o[24]=e("label",{class:"form-label font-weight-semibold"},"Unidade",-1)),n(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=a=>s(t).unidade=a),class:"form-control bg-light",readonly:""},null,512),[[p,s(t).unidade]]),s(t).errors.unidade?(i(),r("div",W,l(s(t).errors.unidade),1)):d("",!0)]),e("div",X,[o[25]||(o[25]=e("label",{class:"form-label font-weight-semibold"},"Quantidade",-1)),n(e("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=a=>s(t).quantidade=a),class:"form-control"},null,512),[[p,s(t).quantidade,void 0,{number:!0}]]),s(t).errors.quantidade?(i(),r("div",Y,l(s(t).errors.quantidade),1)):d("",!0)]),e("div",Z,[o[26]||(o[26]=e("label",{class:"form-label font-weight-semibold"},"Quantidade Medida",-1)),n(e("input",{type:"number",step:"0.01","onUpdate:modelValue":o[10]||(o[10]=a=>s(t).quantidade_medida=a),class:"form-control"},null,512),[[p,s(t).quantidade_medida,void 0,{number:!0}]]),s(t).errors.quantidade_medida?(i(),r("div",oo,l(s(t).errors.quantidade_medida),1)):d("",!0)]),e("div",eo,[o[27]||(o[27]=e("label",{class:"form-label font-weight-semibold"},"SEI - Versão Aprovada",-1)),n(e("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=a=>s(t).sei_versao_aprovada=a),class:"form-control",placeholder:"Digite o SEI da versão aprovada",required:""},null,512),[[p,s(t).sei_versao_aprovada]]),s(t).errors.sei_versao_aprovada?(i(),r("div",to,l(s(t).errors.sei_versao_aprovada),1)):d("",!0)]),e("div",so,[e("button",{type:"submit",class:"btn btn-primary mr-2",disabled:s(t).processing},"CADASTRAR",8,ao),o[28]||(o[28]=e("a",{href:"/subprodutos",class:"btn btn-outline-secondary"},"CANCELAR",-1))])],32)])])])]))}};export{lo as default};
