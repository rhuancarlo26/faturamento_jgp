import{r as S,c as l,o as a,a as t,k as m,t as r,j as i,y as b,C as w,w as p,B as f,u as d,F as y,E as _}from"./app-BSpHz-Ss.js";import{d as A}from"./index-C9HHl74C.js";const O={class:"min-vh-100 bg-light"},k={class:"navbar navbar-dark",style:{"background-color":"#3d85c6"}},C={class:"container-fluid d-flex align-items-center"},D={class:"dropdown ml-auto"},R={class:"navbar-text text-white dropdown-toggle d-flex align-items-center",id:"userDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},T={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"userDropdown"},B={class:"d-flex"},U={class:"flex-grow-1 p-4"},P={class:"container-fluid bg-white rounded-lg shadow p-4",style:{"max-width":"1500px"}},V={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},N={class:"form-group col-md-4"},F={class:"form-group col-md-4"},I={class:"form-group col-md-4 d-flex align-items-end"},E=["disabled"],L={class:"table-responsive"},z={class:"table table-bordered table-hover"},j={class:"thead-light"},M={key:0,class:"text-center align-middle"},$={class:"text-center"},q={class:"text-center"},G={class:"text-center"},J={class:"text-center"},H={class:"text-center"},K={key:0,class:"text-center"},Q=["onClick"],W={key:0},X=["colspan"],st={__name:"Index",props:{subprodutos:Array,dataInicial:String,dataFinal:String,user:Object},setup(n){const o=A.useForm({data_inicial:"",data_final:""}),c=S(null),g=()=>{o.get("/subprodutos",{preserveState:!0})},h=()=>{o.reset(),o.get("/subprodutos")},v=u=>{confirm("Tem certeza que deseja excluir este subproduto?")&&o.delete(`/subprodutos/${u}`,{onSuccess:s=>{c.value=s.props.flash?.success||"Subproduto excluído!"},onFinish:()=>{o.reset()}})},x=()=>{o.post("/logout",{onSuccess:()=>{window.location.href="/subprodutos"}})};return(u,s)=>(a(),l("div",O,[t("nav",k,[t("div",C,[s[4]||(s[4]=t("img",{src:"/images/logo.jpg",alt:"Logo",style:{height:"40px","margin-right":"10px"}},null,-1)),s[5]||(s[5]=t("span",{class:"navbar-brand mb-0 h1"},"Sistema de Controle JGP - DNIT",-1)),t("div",D,[t("span",R,[s[3]||(s[3]=t("i",{class:"fas fa-user-circle mr-2",style:{"font-size":"1.5rem"}},null,-1)),m(" "+r(n.user?.name||"Visitante"),1)]),t("div",T,[n.user?(a(),l("a",{key:0,class:"dropdown-item",href:"#",onClick:b(x,["prevent"])},"Sair")):i("",!0)])])])]),t("div",B,[s[17]||(s[17]=w('<div class="bg-white border-right shadow-sm" style="width:250px;min-height:calc(100vh - 56px);"><ul class="nav flex-column p-3"><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos"><i class="fas fa-search mr-2" style="color:#007BFF;"></i> CONSULTAR SUBPRODUTOS </a></li><li class="nav-item"><a class="nav-link text-uppercase font-weight-bold" style="color:#4B5563;font-size:0.9rem;" href="/subprodutos/create"><i class="fas fa-plus-circle mr-2" style="color:#28A745;"></i> CADASTRAR SUBPRODUTOS </a></li></ul></div>',1)),t("div",U,[t("div",P,[s[14]||(s[14]=t("h3",{class:"text-center mb-4 font-weight-bold",style:{color:"#4B5563","font-size":"1.3rem"}},"CONSULTAR SUBPRODUTOS APROVADOS",-1)),c.value?(a(),l("div",V,[m(r(c.value)+" ",1),t("button",{type:"button",class:"close",onClick:s[0]||(s[0]=e=>c.value=null),"aria-label":"Close"},[...s[6]||(s[6]=[t("span",{"aria-hidden":"true"},"×",-1)])])])):i("",!0),t("form",{onSubmit:b(g,["prevent"]),class:"form-row mb-5 p-4 bg-white rounded-lg shadow-sm border border-gray-200"},[t("div",N,[s[7]||(s[7]=t("label",{class:"form-label font-weight-semibold"},"Data Inicial",-1)),p(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>d(o).data_inicial=e),class:"form-control"},null,512),[[f,d(o).data_inicial]])]),t("div",F,[s[8]||(s[8]=t("label",{class:"form-label font-weight-semibold"},"Data Final",-1)),p(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>d(o).data_final=e),class:"form-control"},null,512),[[f,d(o).data_final]])]),t("div",I,[t("button",{type:"submit",class:"btn btn-primary mr-2",disabled:d(o).processing},"CONSULTAR",8,E),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:h},"LIMPAR")])],32),s[15]||(s[15]=t("h3",{class:"text-center mb-5 font-weight-bold",style:{color:"#4B5563","font-size":"1.25rem"}},"RELAÇÃO DOS SUBPRODUTOS APROVADOS",-1)),t("div",L,[t("table",z,[t("thead",j,[t("tr",null,[s[9]||(s[9]=t("th",{class:"text-center align-middle"},"Rodovia",-1)),s[10]||(s[10]=t("th",{class:"text-center align-middle"},"Subproduto",-1)),s[11]||(s[11]=t("th",{class:"text-center align-middle"},"SEI Versão Aprovada",-1)),s[12]||(s[12]=t("th",{class:"text-center align-middle"},"Cod.SIAC",-1)),s[13]||(s[13]=t("th",{class:"text-center align-middle"},"Parecer Técnico/Portaria/Ofício Aprovação - SEI",-1)),n.user?(a(),l("th",M,"Ações")):i("",!0)])]),t("tbody",null,[(a(!0),l(y,null,_(n.subprodutos,e=>(a(),l("tr",{key:e.id},[t("td",$,r(e.rodovia),1),t("td",q,r(e.subproduto),1),t("td",G,r(e.sei_versao_aprovada||"-"),1),t("td",J,r(e.cod_siac||"-"),1),t("td",H,r(e.oficio_numero||"-"),1),n.user?(a(),l("td",K,[t("button",{class:"btn btn-danger btn-sm",onClick:Y=>v(e.id)},"Excluir",8,Q)])):i("",!0)]))),128)),n.subprodutos.length?i("",!0):(a(),l("tr",W,[t("td",{colspan:n.user?6:5,class:"text-center"},"Nenhum subproduto encontrado.",8,X)]))])])]),s[16]||(s[16]=t("div",{class:"mt-4 text-right"},[t("a",{href:"/subprodutos/create",class:"btn btn-success"},"+ CADASTRAR")],-1))])])])]))}};export{st as default};
